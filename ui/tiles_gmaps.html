<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>INRIX Tiles on Google Maps</title>
    <!-- please specify your google maps api in the url : &key=YOUR_API_KEY -->
    <script
      async
      src="https://maps.googleapis.com/maps/api/js?v=weekly&callback=initMap"
    ></script>
    <script src="./Core/inrix.sample.layer.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript" src="client-config.js"></script>
    <script type="text/javascript" src="token.js"></script>
    <style type="text/css">
    

      body {

        margin: 0;
        padding: 0;
      }

      #map_canvas {
        position: absolute;
        top: 19rem;
        bottom: 0;
        width: 100%;

      }
      #description {
        background: white;
        border-radius: 7px;
        border: 3px solid silver;
        padding: 2rem;
        line-height: 2rem;
        padding-left: 3rem;
        padding-right: 3rem;
      }
    </style>
  </head>

  <body>
    <div id="description">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget
      ullamcorper metus, sit amet aliquam dolor. Fusce ac fringilla nibh. In
      pellentesque non turpis quis blandit. Ut venenatis ipsum id dolor
      tincidunt varius. Nam quis molestie tellus, ut ultricies libero. Aliquam
      dignissim, sapien a elementum volutpat, justo nisi malesuada justo, a
      pellentesque nibh mauris in nibh. Sed vel leo augue. Nullam sit amet neque
      a mauris vulputate gravida. Nam eu turpis quis risus tristique vulputate
      sed eu tortor. Vestibulum convallis euismod arcu, eu scelerisque mauris
      luctus in. Donec non massa mauris. Aliquam finibus tristique enim eu
      ultrices. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
      posuere cubilia curae; Mauris commodo risus tellus, in pellentesque purus
      suscipit ac. Suspendisse sit amet felis finibus, tincidunt ante ac,
      euismod tortor. Sed at condimentum augue, ac lacinia dui. Etiam viverra
      massa et orci lobortis, varius laoreet leo viverra. Aliquam vulputate,
      ligula vitae molestie semper, turpis erat blandit velit, in consectetur ex
      libero quis augue. Mauris iaculis sed massa vel accumsan. Phasellus
      commodo felis dictum mauris mollis facilisis et et erat. Etiam a erat
      erat.
    </div>
    <div id="map_canvas"></div>

    <script>



      async function initMap() {
        // Access token management would be handled on the backend of your server, it would get / renew / reuse the token as necessary
        this.accessToken = await getToken(); 

        // setting up San Francisco boundaries:
        const strictBounds = new google.maps.LatLngBounds(
          new google.maps.LatLng(37.71, -122.53),
          new google.maps.LatLng(37.81, -122.35)
        );
        const SF = { lat: 37.77, lng: -122.41 };

        const center = new google.maps.LatLng(SF);
        const mapOptions = {
          center: center,
          zoom: 15,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          restriction: {
            latLngBounds: strictBounds,
            strictBounds: true,
          },
        };

        const map = new google.maps.Map(
          document.getElementById("map_canvas"),
          mapOptions
        );
        const traffic = new InrixTileLayer(map, this.accessToken.token, config);
        traffic.show();
      }
    </script>
  </body>
</html>
